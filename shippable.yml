language: go

go:
  - 1.2
  #- 1.1

env:
 global:
  - CI_REPORT=shippable/testresults/junit.xml
  - secure: AdFjqWHiA5Y0lyRTC1P+2e1TcXcoRrJf28cIYhTF7CY8QqDz4zvOJD6TJ+cuyC7QM/A9XovDBowePD0BDbLfpjav3fM5tvg4Mjl/DeGcrdtDT7QYr7TYO2/I9q9Q6giBmz7s8IOubGtfgdvRg8CyKDA9p/nVR+FdpJ6tcWqRBDDPOCWQqroPJegztlwm+zdZhGQoaDzqAKW/deAlsIqJLW9LLXvfJyEikWDx9g25PDZEX+R14B0Ext1SFjj5hjMRunEYiBHkpQXJqSeK81Hy1YN2Dhfwlo3VMGArjfwyMUlSoE5dYw4WAuH8e/O84bHgW/cZ1FPH0E2Bmo8O8LBfUA==
  #- secure: Qjz3qB38Bek50Ej3iVUCvvOkeiSuGUsTRvlKHhQxO8FPCZPdAcuZfHppiPII55PSq0k6smDndpvVy79fs1bku9EIjJq4snNuboD/02FpC8Epy9KXP1NebZPz6Z8fcZPIhE85JM8/5lztLx4d0SqWfjgYCm4fscBgniaOVHy4UbtBJ3AWNB5ZE69uit+hYLH+S4zJ/SGqq4aT89vwTWf9LuXxVbgLVwh3dENAGBCqGDrBUwfYME4RyD7ql+jyNRn1sggEas3c7ThoIKk

before_install:
  - go get github.com/t-yuki/gocover-cobertura
  - go get github.com/onsi/gomega
  - go get github.com/onsi/ginkgo
  - go get code.google.com/p/go.tools/cmd/cover


# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage


script:
  - echo $foo and $test
  - go test -coverprofile=coverage.txt -covermode count ./
  - $GOPATH/bin/gocover-cobertura < coverage.txt > shippable/codecoverage/coverage.xml

after_script:
  - echo "testing"
archive: true
#test
